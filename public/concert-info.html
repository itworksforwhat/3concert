<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <meta property="og:image" content="상세_페이지_01_포스터.jpg">
    <link rel="icon" href="icon.png" type="image/x-icon">
  <title>콘서트 예매 정보</title>
  <style>body {
  background: #212121;
  color: #ffffff;
  margin: 0;
  overflow-x: hidden;
  font-family: 'Playfair Display', serif;
}
/* ------ HEADER ------ */
header {
  width: 100%;
  background: none;
  position: relative;
  margin: 0;
  left: 0;
  transform: none;
  display: block;
}
.back-btn {
  position: absolute;
  top: 18px;
  left: 200px; /* 사이드바 넓이대로 조정 */
  background: #2a2921;
  color: #ffe9b3;
  border: none;
  border-radius: 8px;
  font-size: 1.0rem;
  padding: 0.5em 1.3em;
  cursor: pointer;
  font-family: 'Playfair Display', serif;
  z-index: 2;
}
.back-btn:hover {
  background: #44422a;
}
.title {
  font-family: 'HandwritingBlackDraft', serif;
  text-align: center;
  font-size: 1.6rem;
  font-style: italic;
  color: #bfbfbf;
  padding: 0.2em 1.2em;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.header-img {
  width: 300px;
  height: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #bfbfbf;
  padding: 0.2em 1.2em;
  border-radius: 4px;
  margin: 0 auto;
}
/* ----- 사이드바 ----- */
.sidebar {
  width: 190px;
  min-width: 120px;
  background: #111;
  padding-top: 2rem;
  height: 100vh;
  position: fixed;
  top: 0; left: 0;
  z-index: 99;
  overflow-y: auto;
  transition: all 0.3s;
}
.sidebar ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.sidebar li {
  padding: 1.1rem 1.3rem;
  line-height: 1.3;
  color: #ffe9b3;
  cursor: pointer;
  transition: background 0.2s;
  font-size: 1rem;
  font-family: 'Playfair Display', serif;
  border-left: 3px solid transparent;
  box-sizing: border-box;
  width: 100%;
  display: block;
}
.sidebar li.active {
  background: #333;
  border-left: 3px solid #ffd264;
  color: #ffd264;
  font-weight: bold;
}
.sidebar li:hover {
  background: #333;
}
.main-content {
  margin-left: 190px;
  padding: 1rem;
}
/* ------ info-header ------ */
.info-header {
  text-align: center;
  margin-top: 1rem;
}
.info-caption {
  color: #bbb;
  font-size: 1rem;
  margin-bottom: 1.5em;
}
/* ---------- 슬라이더 ---------- */
.slider {
  position: relative;
  width: 80vw;
  max-width: 900px;
  height: 56vw;
  max-height: 800px;
  margin: 0 auto;
  background: #191919;
  overflow: hidden;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.slides {
  display: flex;
  width: 100%;
  height: 100%;
  transition: transform 0.4s cubic-bezier(.37,.31,.54,1.25);
}
.slides img {
  flex-shrink: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 10px;
  background: #222;
  cursor: pointer;
}
.prev, .next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.5);
  color: white;
  font-size: 2rem;
  border: none;
  padding: 10px;
  cursor: pointer;
  border-radius: 50%;
  z-index: 2;
}
.prev { left: 10px; }
.next { right: 10px; }
/* ------ 모달 ------ */
.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  top: 0; left: 0; width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.92);
  align-items: center;
  justify-content: center;
}
.modal.active { display: flex; }
.modal-close {
  position: absolute;
  top: 22px; right: 35px;
  background: transparent;
  border: none;
  color: rgba(0,0,0,0.92);
  font-size: 3rem;
  cursor: pointer;
  z-index: 20;
  opacity: 0.8;
  transition: opacity 0.2s;
}
.modal img {
  width: 90vw; height: 90vh;
  max-width: 1200px; max-height: 90vh;
  object-fit: contain;
  border-radius: 12px;
  box-shadow: 0 0 48px #111;
  background: #fff;
  display: block;
  margin: 0 auto;
  user-select: none;
}

.modal-close:hover { opacity: 1; }

/* ---- PC (기본 메뉴) ---- */
.navbar { display: block; }
.overlay-menu { display: none; }

/* ---- 모바일 반응형 ---- */
@media (max-width: 900px){
  .slider, .slides img {
    width: 99vw;
    max-width: 99vw;
    height: 58vw;
    max-height: 65vw;
  }
  .header-row, .sidebar, .main-content { margin-left: 98px !important; }
  .sidebar { width:98px;}
  .main-content{ margin-left:105px;}
}
@media (max-width:600px){
  /* 오버레이 메뉴만 보이기 */
  .navbar { display: none; }
  .overlay-menu {
    display: block;
    position: fixed;
    left: 0; top: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0,0,0,0.8);
    z-index: 1000;
    /* flex/column 등 추가 가능 */
  }
  /* 기존 사이드바 숨김 */
  .sidebar {
    display: none;
  }
  /* 메뉴 항목 크기/여백 축소 */
  .overlay-menu ul,
  .overlay-menu li {
    font-size: 15px;
    padding: 8px 10px;
  }
  .slider, .slides img {
    height: 55vw;
    max-height: 63vw;
  }
  .header-row, .main-content { margin-left: 0 !important; }
  .header-row { gap: 0.7rem; }
  .back-btn { font-size: 0.87rem; padding: 0; 
    position: fixed; top: 10px; left: 10px; }
  header .title { font-size: 1.15rem;}
}


  </style>
</head>
<body>
<header>
  <div class="header-row">
    <button onclick="history.back()" class="back-btn">← 이전으로</button>
    <div class="title">
      <img src="일러스트3.png" alt="설명 텍스트" class="header-img">
    </div>
  </div>
</header>
<br>
<br>
<br>
<br>
<br>

  <!-- 사이드바 -->
  <div class="sidebar">
    <ul id="toc">
      <li data-index="0">포스터</li>
      <li data-index="1">공연정보</li>
      <li data-index="2">좌석 배치도</li>
      <li data-index="3">입장특전</li>
      <li data-index="4">MD 리스트</li>
      <li data-index="5">공지사항</li>
      <li data-index="6">선예매 안내</li>
      <li data-index="7">예매 안내</li>
      <li data-index="8">티켓 수령 안내</li>
      <li data-index="9">관람 유의 사항</li>
    </ul>
  </div>
  <div class="main-content">
    <div class="info-header">
      <h1>콘서트 예매 정보</h1>
      <div class="info-caption">
        예매 안내/좌석 배치/포스터 등 이미지를 클릭하면 더 크게 볼 수 있습니다.
      </div>
    </div>
    <!-- 슬라이더 -->
    <div class="slider">
      <div class="slides">
        <img src="상세_페이지_01_포스터.jpg" alt="포스터">
        <img src="상세_페이지_02_공연정보.jpg" alt="공연정보">
        <img src="상세_페이지_03_좌석_배치도.jpg" alt="좌석 배치도">
        <img src="상세_페이지_04_입장특전.jpg" alt="입장특전">
        <img src="상세_페이지_05_MD_리스트.jpg" alt="MD 리스트">
        <img src="상세_페이지_06_공지_사항.jpg" alt="공지사항">
        <img src="상세_페이지_07_선예매_안내.jpg" alt="선예매 안내">
        <img src="상세_페이지_08_예매_안내.jpg" alt="예매 안내">
        <img src="상세_페이지_09_티켓_수령_안내.jpg" alt="티켓 수령 안내">
        <img src="상세_페이지_10__관람_유의_사항.jpg" alt="관람 유의 사항">
      </div>
      <button class="prev">❮</button>
      <button class="next">❯</button>
    </div>
  </div>
  <!-- 모달 -->
  <div class="modal" id="modal">
    <button class="modal-close" id="modalClose">&times;</button>
    <img src="" alt="크게 보기" id="modalImg">
  </div>
  <script>
   const slides = document.querySelector('.slides');
const images = document.querySelectorAll('.slides img');
const prevBtn = document.querySelector('.prev');
const nextBtn = document.querySelector('.next');
const sidebarItems = document.querySelectorAll('.sidebar li');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modalImg');
const modalClose = document.getElementById('modalClose');

let currentIndex = 0;
showSlide(0);

function showSlide(index) {
  if (index < 0) index = images.length - 1;
  if (index >= images.length) index = 0;
  currentIndex = index;
  slides.style.transform = `translateX(${-100 * index}%)`;
  sidebarItems.forEach(s => s.classList.remove('active'));
  sidebarItems[index].classList.add('active');
}

prevBtn.addEventListener('click', () => showSlide(currentIndex - 1));
nextBtn.addEventListener('click', () => showSlide(currentIndex + 1));

sidebarItems.forEach(item => {
  item.addEventListener('click', () => {
    const i = parseInt(item.dataset.index);
    showSlide(i);
  });
});

// ----------------- 여기서부터 모달 스와이프를 위한 변수, 함수 추가 -----------------
let modalIndex = 0;

function showModalImage(idx) {
  const max = images.length;
  if (idx < 0) idx = max - 1;
  if (idx >= max) idx = 0;
  modalIndex = idx;
  modalImg.src = images[modalIndex].src;
}

// 이미지를 클릭하면 모달 오픈 + 인덱스 저장
images.forEach((img, i) => {
  img.addEventListener('click', () => {
    showModalImage(i);
    modal.classList.add('active');
  });
});
// ----------------- end of 추가 -----------------

modalClose.onclick = () => modal.classList.remove('active');
modal.onclick = (e) => { if (e.target === modal) modal.classList.remove('active'); };

window.addEventListener('keydown', e => {
  if (e.key === 'Escape') modal.classList.remove('active');
  if (modal.classList.contains('active')) return;
  if (e.key === "ArrowLeft") showSlide(currentIndex - 1);
  if (e.key === "ArrowRight") showSlide(currentIndex + 1);
});

let isDragging = false, startX = 0, endX = 0;
slides.addEventListener('mousedown', e => { isDragging = true; startX = e.pageX; });
slides.addEventListener('mousemove', e => { if (!isDragging) return; endX = e.pageX; });
slides.addEventListener('mouseup', e => {
  if (!isDragging) return;
  isDragging = false;
  if (startX - endX > 50) showSlide(currentIndex + 1);
  else if (endX - startX > 50) showSlide(currentIndex - 1);
});
slides.addEventListener('mouseleave', () => { isDragging = false; });

// 모바일 슬라이더 스와이프 동작
let touchStartX = 0;
let touchEndX = 0;
slides.addEventListener('touchstart', function(e) {
  if (e.touches.length > 1) return;
  touchStartX = e.touches[0].clientX;
  touchEndX = touchStartX;
}, { passive: true });

slides.addEventListener('touchmove', function(e) {
  if (e.touches.length > 1) return;
  touchEndX = e.touches[0].clientX;
}, { passive: true });

slides.addEventListener('touchend', function(e) {
  const moveX = touchStartX - touchEndX;
  if (Math.abs(moveX) > 50) {
    if (moveX > 0) showSlide(currentIndex + 1); // 왼쪽 스와이프
    else showSlide(currentIndex - 1);           // 오른쪽 스와이프
  }
});

// ---------- 여기서부터 모달 이미지 모바일에서만 스와이프 ----------
function isMobileWidth() {
  return window.innerWidth <= 900;
}

// 모바일에서만 모달 스와이프 이벤트 등록
function setupModalSwipe() {
  // 기존 이벤트 제거 (동일 이벤트 중복 방지)
  modalImg.ontouchstart = null;
  modalImg.ontouchmove = null;
  modalImg.ontouchend = null;

  if (!isMobileWidth()) return;

  let startX = 0, endX = 0;
  modalImg.addEventListener('touchstart', function(e) {
    if (e.touches.length > 1) return;
    startX = e.touches[0].clientX;
    endX = startX;
  }, { passive: true });

  modalImg.addEventListener('touchmove', function(e) {
    if (e.touches.length > 1) return;
    endX = e.touches[0].clientX;
  }, { passive: true });

  modalImg.addEventListener('touchend', function(e) {
    const delta = startX - endX;
    if (Math.abs(delta) > 50) {
      if (delta > 0) showModalImage(modalIndex + 1);    // 다음 이미지
      else showModalImage(modalIndex - 1);              // 이전 이미지
    }
  });
}
// 초기화: 모달 이미지 클릭 시 스와이프 기능 활성화
images.forEach((img, i) => {
  img.addEventListener('click', () => {
    showModalImage(i);
    modal.classList.add('active');
    setupModalSwipe(); // 모달 열 때마다 스와이프 설정
  });
}); 
// 모달 닫을 때 스와이프 기능 비활성화
modalClose.addEventListener('click', () => {
  modal.classList.remove('active');
  modalImg.src = ''; // 이미지 초기화
}); 

// 페이지 로드 시 적용, 창 크기 바뀔 때도 재적용
setupModalSwipe();
window.addEventListener('resize', setupModalSwipe);
// ---------- end 모달 스와이프 추가 ----------
document.querySelectorAll('.sidebar li').forEach(item => {
  item.addEventListener('click', () => {
    document.querySelectorAll('.sidebar li').forEach(i => i.classList.remove('active'));
    item.classList.add('active');
  });
});
  </script>
</body>
</html>
